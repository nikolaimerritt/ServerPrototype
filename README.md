# ServerPrototype
A simple prototype for building a server which syncs when connected to the internet.

# Data storage
There are two separate data stores: an online database and an offline backup. The backup will not store the whole database -- that would be both inefficient and unsafe. It currently only stores updates the client has sent, or tried to send to the database. As this project grows the backup will need to store data not generated by the client, however, such as the map showing where various businesses are. Of course, the backup will never store personal data that does not belong to the user.

The online database is currently a simple PHP script which reads to and writes from a text file. In future, the PHP script  will interact with a more sophisticated program which manages reading to and writing from a central data file. This will definitely be necessary once the data grows much more complex, and needs to be stored in the data file in a more complex way. A copy of this data file manager will also have to be present offline along with the application, so that the client can interact with the offline backup.

# Server class
The application using the Server class doesn't have to worry about whether they have an internet connection or not. They simply construct a Server object by passing it the URL for the database and the file path of the offline backup. The Server object's `read()` and `write()` functions will use the online server if there is an internet connection. Otherwise they will use the offline backup. 

If the object has written to the backup when offline, meaning these changes have not also been written to the online database, the object will generate an empty file to act as a flag that the online database needs updating. An empty file is used so that this flag will persist when the application closes. The Server object also spawns a separate thread on construction that continuously checks whether the client is online. If the flag file exists, the thread will update the database once the client is online.
